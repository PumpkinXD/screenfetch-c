# Credits: wenxinyiyan(baidu's "chatgpt"), xmake devs
# Not finished yet
name: Build and Test 
  
on:  
  pull_request:
    types: [review_requested]
  workflow_dispatch:
  
jobs:  
  build_and_test_on_ubuntu:  
    runs-on: ubuntu-latest  
    steps:  
      - name: Checkout  
        uses: actions/checkout@v4.1.1
  
      - name: Setup xmake  
        uses: xmake-io/github-action-setup-xmake@v1  
        with:  
          xmake-version: latest  
  
      - name: Build with xmake  
        run: xmake -yvD

      - name: Runs on ubuntu-latest
        run: xmake run  
  
      - name: Upload Build Artifacts
        uses: actions/upload-artifact@v4
        with:
            name: Artifact_Files
            path: build/linux/x86_64
      # - name: Upload Build Artifacts to GitHub Release  
      #   uses: svenstaro/upload-release-action@v2.9.0  
      #   with:  
      #     repo_token: ${{ secrets.GITHUB_TOKEN }}  
      #     file: build/linux/x86_64/release/screenfetch-c.com
      #     asset_name:  screenfetch-c.com
      #     tag: ${{ github.ref }}  
      #     overwrite: true